{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CaroH\\\\Documents\\\\fing\\\\TSE\\\\lab\\\\test-frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './index.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://127.0.0.1:8080';\nconst PERIFERICO_BASE = `${API_BASE}/hcen-web/api`;\nconst RNDC_BASE = `${API_BASE}/rndc/api`;\nconst POLITICAS_BASE = `${API_BASE}/hcen-politicas-service/api`;\nfunction App() {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\n  const [nickname, setNickname] = useState('admin_c1');\n  const [password, setPassword] = useState('password123');\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n  const [modo, setModo] = useState('profesional'); // 'profesional' o 'paciente'\n\n  // Documento\n  const [documentoId, setDocumentoId] = useState('');\n  const [mongoId, setMongoId] = useState('');\n  const [documentoIdPaciente, setDocumentoIdPaciente] = useState('12345673');\n  const [contenido, setContenido] = useState('Paciente presenta sintomas de gripe. Diagnostico: Gripe estacional. Tratamiento: reposo, hidratacion y medicamentos sintomaticos.');\n  const [titulo, setTitulo] = useState('Consulta Medica - Gripe');\n  const [especialidad, setEspecialidad] = useState('MEDICINA_GENERAL');\n  const [archivoAdjunto, setArchivoAdjunto] = useState(null);\n  const fileInputRef = useRef(null);\n\n  // Búsqueda\n  const [ciBusqueda, setCiBusqueda] = useState('12345673');\n  const [documentosEncontrados, setDocumentosEncontrados] = useState([]);\n  const [documentoSeleccionado, setDocumentoSeleccionado] = useState(null);\n\n  // Solicitudes\n  const [solicitudId, setSolicitudId] = useState('');\n  const [solicitudes, setSolicitudes] = useState([]);\n  const [solicitudTipoDocumento, setSolicitudTipoDocumento] = useState('');\n  const [solicitudDocumentoId, setSolicitudDocumentoId] = useState('');\n  const [solicitudHistoriaCompleta, setSolicitudHistoriaCompleta] = useState(false);\n  useEffect(() => {\n    if (token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    }\n  }, [token]);\n  const handleLogin = async () => {\n    setLoading(true);\n    setResult(null);\n    try {\n      const response = await fetch(`${PERIFERICO_BASE}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          nickname,\n          password\n        })\n      });\n\n      // Leer el texto primero para poder intentar parsearlo como JSON\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok && data.token) {\n        setToken(data.token);\n        setResult({\n          success: true,\n          message: 'Login exitoso',\n          data\n        });\n      } else {\n        setResult({\n          success: false,\n          message: data.error || `Error en login (${response.status})`,\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: `Error de conexión: ${error.message}`,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLogout = () => {\n    setToken('');\n    setResult(null);\n    setDocumentosEncontrados([]);\n    setDocumentoSeleccionado(null);\n  };\n  const handleCrearDocumento = async () => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      let response;\n      let data;\n\n      // Si hay archivo adjunto, usar el endpoint multipart\n      if (archivoAdjunto) {\n        const formData = new FormData();\n        formData.append('contenido', contenido);\n        formData.append('documentoIdPaciente', documentoIdPaciente);\n        formData.append('titulo', titulo);\n        formData.append('autor', nickname);\n        formData.append('especialidad', especialidad);\n        formData.append('archivo', archivoAdjunto);\n        response = await fetch(`${PERIFERICO_BASE}/documentos/completo-con-archivo`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`\n            // No establecer Content-Type, el navegador lo hará automáticamente con el boundary\n          },\n          body: formData\n        });\n      } else {\n        // Sin archivo, usar el endpoint JSON normal\n        const body = {\n          documentoIdPaciente,\n          contenido,\n          titulo,\n          especialidad,\n          formato: 'text/plain',\n          autor: nickname,\n          fechaCreacion: new Date().toISOString(),\n          breakingTheGlass: false\n        };\n        response = await fetch(`${PERIFERICO_BASE}/documentos/completo`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(body)\n        });\n      }\n\n      // Leer el texto primero para poder intentar parsearlo como JSON\n      const text = await response.text();\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setDocumentoId(data.documentoId || '');\n        setMongoId(data.mongoId || '');\n        const mensaje = 'Documento creado exitosamente' + (data.tienePdf ? ' (PDF generado)' : '') + (data.tieneArchivoAdjunto ? ' (Archivo adjunto guardado)' : '');\n        setResult({\n          success: true,\n          message: mensaje,\n          data\n        });\n        // Limpiar el archivo seleccionado después de crear el documento\n        setArchivoAdjunto(null);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      } else {\n        setResult({\n          success: false,\n          message: data.error || 'Error al crear documento',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleArchivoChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setArchivoAdjunto(file);\n    } else {\n      setArchivoAdjunto(null);\n    }\n  };\n  const handleBuscarPorCI = async () => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const response = await fetch(`${RNDC_BASE}/rndc/documentos/paciente/${ciBusqueda}`, {\n        method: 'GET',\n        headers: {\n          'X-Profesional-Id': nickname\n        }\n      });\n\n      // Leer el texto primero para poder intentar parsearlo como JSON\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setDocumentosEncontrados(Array.isArray(data) ? data : []);\n        setResult({\n          success: true,\n          message: `Encontrados ${Array.isArray(data) ? data.length : 0} documentos`,\n          data\n        });\n      } else {\n        setResult({\n          success: false,\n          message: data.error || 'Error al buscar documentos',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleObtenerDocumento = async docId => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const response = await fetch(`${RNDC_BASE}/rndc/documentos/${docId}`, {\n        method: 'GET',\n        headers: {\n          'X-Profesional-Id': nickname\n        }\n      });\n\n      // Leer el texto primero para poder intentar parsearlo como JSON\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setDocumentoSeleccionado(data);\n        setResult({\n          success: true,\n          message: 'Documento obtenido exitosamente',\n          data\n        });\n      } else {\n        setResult({\n          success: false,\n          message: data.error || 'Error al obtener documento',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDescargarDocumento = async (docId, esPaciente = false) => {\n    if (!token && !esPaciente) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const headers = {};\n      if (esPaciente) {\n        headers['X-Paciente-CI'] = documentoIdPaciente;\n      } else {\n        headers['X-Profesional-Id'] = nickname;\n      }\n      const response = await fetch(`${RNDC_BASE}/rndc/documentos/${docId}/descargar`, {\n        method: 'GET',\n        headers: headers\n      });\n      if (response.ok) {\n        // Verificar el Content-Type de la respuesta\n        const contentType = response.headers.get('Content-Type') || 'application/pdf';\n        const contentDisposition = response.headers.get('Content-Disposition');\n\n        // Extraer el nombre del archivo del header Content-Disposition si está disponible\n        let fileName = `documento-${docId}.pdf`;\n        if (contentDisposition) {\n          const fileNameMatch = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);\n          if (fileNameMatch && fileNameMatch[1]) {\n            fileName = fileNameMatch[1].replace(/['\"]/g, '');\n          }\n        }\n        const blob = await response.blob();\n\n        // Verificar que el blob no esté vacío\n        if (blob.size === 0) {\n          setResult({\n            success: false,\n            message: 'Error: El archivo descargado está vacío',\n            error: 'El servidor devolvió un archivo vacío'\n          });\n          setLoading(false);\n          return;\n        }\n\n        // Verificar que el blob sea un PDF válido (debe empezar con %PDF)\n        const arrayBuffer = await blob.arrayBuffer();\n        const uint8Array = new Uint8Array(arrayBuffer);\n        const isPdf = uint8Array.length >= 4 && uint8Array[0] === 0x25 &&\n        // %\n        uint8Array[1] === 0x50 &&\n        // P\n        uint8Array[2] === 0x44 &&\n        // D\n        uint8Array[3] === 0x46; // F\n\n        if (!isPdf && contentType.includes('application/pdf')) {\n          // Si el Content-Type dice PDF pero el contenido no lo es, puede ser un error JSON\n          const text = await new Response(blob).text();\n          try {\n            const errorData = JSON.parse(text);\n            setResult({\n              success: false,\n              message: errorData.error || 'Error al descargar documento',\n              error: `Status: ${response.status}, Body: ${text}`\n            });\n          } catch (e) {\n            setResult({\n              success: false,\n              message: 'Error: El archivo descargado no es un PDF válido',\n              error: `Content-Type: ${contentType}, Tamaño: ${blob.size} bytes`\n            });\n          }\n          setLoading(false);\n          return;\n        }\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n        setResult({\n          success: true,\n          message: `Documento descargado exitosamente ${esPaciente ? '(como paciente)' : '(como profesional)'} - Tamaño: ${(blob.size / 1024).toFixed(2)} KB`\n        });\n      } else {\n        // Leer el texto primero para poder intentar parsearlo como JSON\n        const text = await response.text();\n        let data;\n        try {\n          data = JSON.parse(text);\n        } catch (e) {\n          // Si no se puede parsear como JSON, usar el texto como mensaje de error\n          setResult({\n            success: false,\n            message: `Error ${response.status}: ${text || response.statusText}`,\n            error: `Status: ${response.status}, Body: ${text}`\n          });\n          setLoading(false);\n          return;\n        }\n        setResult({\n          success: false,\n          message: data.error || 'Error al descargar documento',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDescargarContenido = async (mongoId, esPaciente = false) => {\n    if (!token && !esPaciente) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const headers = {\n        'Authorization': `Bearer ${token}`\n      };\n      if (esPaciente) {\n        headers['X-Paciente-CI'] = documentoIdPaciente;\n      }\n      const response = await fetch(`${PERIFERICO_BASE}/documentos/${mongoId}/contenido`, {\n        method: 'GET',\n        headers: headers\n      });\n\n      // Leer el texto primero para poder intentar parsearlo como JSON\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        // Si no se puede parsear como JSON, puede ser texto plano\n        if (response.ok) {\n          setResult({\n            success: true,\n            message: 'Contenido obtenido exitosamente',\n            data: {\n              contenido: text\n            }\n          });\n          setLoading(false);\n          return;\n        }\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setResult({\n          success: true,\n          message: `Contenido obtenido exitosamente ${esPaciente ? '(como paciente)' : '(como profesional)'}`,\n          data\n        });\n      } else {\n        setResult({\n          success: false,\n          message: data.error || 'Error al obtener contenido',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleListarSolicitudes = async (soloPendientes = true) => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      // Listar solicitudes del paciente (pendientes o todas)\n      const endpoint = soloPendientes ? `${POLITICAS_BASE}/solicitudes/paciente/${documentoIdPaciente}/pendientes` : `${POLITICAS_BASE}/solicitudes/paciente/${documentoIdPaciente}`;\n      const response = await fetch(endpoint, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setSolicitudes(Array.isArray(data) ? data : []);\n        const tipo = soloPendientes ? 'pendientes' : 'todas';\n        setResult({\n          success: true,\n          message: `Encontradas ${Array.isArray(data) ? data.length : 0} solicitudes ${tipo}`,\n          data\n        });\n      } else {\n        setResult({\n          success: false,\n          message: data.error || 'Error al listar solicitudes',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleVerificarPermiso = async docId => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const documento = documentosEncontrados.find(d => (d.codDocum || d.id) === docId);\n      const tipoDoc = (documento === null || documento === void 0 ? void 0 : documento.tipoDocumento) || '';\n\n      // Construir URL con parámetros\n      const url = new URL(`${POLITICAS_BASE}/politicas/verificar`);\n      url.searchParams.append('profesionalId', nickname);\n      url.searchParams.append('pacienteCI', documentoIdPaciente);\n      if (tipoDoc) {\n        url.searchParams.append('tipoDoc', tipoDoc);\n      }\n      const response = await fetch(url.toString(), {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n          // No incluir Content-Type para GET requests\n        }\n      });\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setResult({\n          success: true,\n          message: data.tienePermiso ? '✅ Tiene permiso para acceder' : '❌ No tiene permiso para acceder',\n          data\n        });\n      } else {\n        setResult({\n          success: false,\n          message: data.error || `Error al verificar permiso (${response.status})`,\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: `Error de conexión: ${error.message}`,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSolicitarAcceso = async () => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      let body;\n      let endpoint;\n      if (solicitudHistoriaCompleta) {\n        // Solicitar acceso a toda la historia clínica\n        endpoint = `${PERIFERICO_BASE}/documentos/solicitar-acceso-historia-clinica`;\n        body = {\n          codDocumPaciente: documentoIdPaciente,\n          razonSolicitud: 'Solicitud de acceso a toda la historia clínica del paciente',\n          especialidad: especialidad\n        };\n      } else {\n        // Solicitar acceso a documento específico\n        endpoint = `${PERIFERICO_BASE}/documentos/solicitar-acceso`;\n        body = {\n          codDocumPaciente: documentoIdPaciente,\n          tipoDocumento: solicitudTipoDocumento || (documentoId ? 'OTROS' : null),\n          documentoId: solicitudDocumentoId || documentoId || null,\n          razonSolicitud: 'Prueba de acceso desde frontend'\n        };\n      }\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(body)\n      });\n\n      // Leer el texto primero para poder intentar parsearlo como JSON\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        const solicitudIdNuevo = data.id || data.solicitudId || '';\n        setSolicitudId(solicitudIdNuevo);\n        setResult({\n          success: true,\n          message: 'Solicitud creada exitosamente',\n          data\n        });\n        // Actualizar lista de solicitudes si estamos en modo paciente\n        if (modo === 'paciente') {\n          setTimeout(() => handleListarSolicitudes(true), 500);\n        }\n      } else {\n        setResult({\n          success: false,\n          message: data.error || 'Error al crear solicitud',\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAprobarSolicitud = async solicitudId => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const response = await fetch(`${PERIFERICO_BASE}/documentos/solicitudes/${solicitudId}/aprobar`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          resueltoPor: modo === 'paciente' ? `paciente_${documentoIdPaciente}` : nickname,\n          comentario: 'Aprobado desde frontend de pruebas'\n        })\n      });\n      const text = await response.text();\n      let data;\n      try {\n        data = JSON.parse(text);\n      } catch (e) {\n        setResult({\n          success: false,\n          message: `Error ${response.status}: ${text || response.statusText}`,\n          error: `Status: ${response.status}, Body: ${text}`\n        });\n        setLoading(false);\n        return;\n      }\n      if (response.ok) {\n        setResult({\n          success: true,\n          message: '✅ Solicitud aprobada exitosamente. Se creó automáticamente una política de acceso.',\n          data\n        });\n        // Actualizar lista de solicitudes si estamos en modo paciente\n        if (modo === 'paciente') {\n          setTimeout(() => handleListarSolicitudes(true), 500);\n        }\n      } else {\n        setResult({\n          success: false,\n          message: data.error || `Error al aprobar solicitud (${response.status})`,\n          data\n        });\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: `Error de conexión: ${error.message}`,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRechazarSolicitud = async solicitudId => {\n    if (!token) {\n      setResult({\n        success: false,\n        message: 'Debes iniciar sesión primero'\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const response = await fetch(`${PERIFERICO_BASE}/documentos/solicitudes/${solicitudId}/rechazar`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          resueltoPor: modo === 'paciente' ? `paciente_${documentoIdPaciente}` : nickname,\n          comentario: 'Rechazado desde frontend de pruebas'\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        let errorData;\n        try {\n          errorData = JSON.parse(errorText);\n        } catch {\n          errorData = {\n            error: errorText || `Error ${response.status}`\n          };\n        }\n        setResult({\n          success: false,\n          message: errorData.error || 'Error al rechazar solicitud',\n          data: errorData\n        });\n        return;\n      }\n      const data = await response.json();\n      setResult({\n        success: true,\n        message: '❌ Solicitud rechazada exitosamente',\n        data\n      });\n      // Actualizar lista de solicitudes si estamos en modo paciente\n      if (modo === 'paciente') {\n        setTimeout(() => handleListarSolicitudes(true), 500);\n      }\n    } catch (error) {\n      setResult({\n        success: false,\n        message: error.message,\n        error: error.toString()\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDD2C HCEN Test Frontend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Interfaz de pruebas para endpoints HCEN - Flujo Completo de Acceso a Documentos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px',\n          display: 'flex',\n          gap: '15px',\n          alignItems: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Estado:\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `status-badge ${token ? 'authenticated' : 'unauthenticated'}`,\n            children: token ? 'Autenticado' : 'No autenticado'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 753,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Modo:\", /*#__PURE__*/_jsxDEV(\"select\", {\n            value: modo,\n            onChange: e => setModo(e.target.value),\n            style: {\n              marginLeft: '5px',\n              padding: '5px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"profesional\",\n              children: \"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Profesional\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"paciente\",\n              children: \"\\uD83D\\uDC64 Paciente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 11\n        }, this), token && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"token-display\",\n          children: [\"Usuario: \", nickname, \" | Token: \", token.substring(0, 20), \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      style: {\n        background: '#e3f2fd',\n        borderLeft: '4px solid #2196F3'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCD6 Gu\\xEDa de Uso - Flujo Completo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 780,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          lineHeight: '1.8'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Flujo Principal:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          style: {\n            marginLeft: '20px',\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Como Profesional:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 17\n            }, this), \" Crear un documento cl\\xEDnico para un paciente\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Como Otro Profesional:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 17\n            }, this), \" Intentar acceder al documento (ser\\xE1 denegado sin permisos)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 785,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Como Otro Profesional:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 17\n            }, this), \" Solicitar acceso al documento o historia cl\\xEDnica completa\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Como Paciente:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 17\n            }, this), \" Listar solicitudes pendientes y aprobar/rechazar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 787,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Como Profesional:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 17\n            }, this), \" Verificar permisos y acceder al documento (ahora permitido)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 788,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Como Paciente:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 17\n            }, this), \" Acceder a sus propios documentos sin solicitar autorizaci\\xF3n\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '15px',\n            padding: '10px',\n            background: '#fff',\n            borderRadius: '4px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDCA1 Tip:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 13\n          }, this), \" Cambia entre modo \\\"Profesional\\\" y \\\"Paciente\\\" en el selector del header para probar diferentes escenarios.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 779,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDD10 Autenticaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nickname:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: nickname,\n            onChange: e => setNickname(e.target.value),\n            placeholder: \"admin_c1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 803,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            placeholder: \"password123\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 800,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleLogin,\n          disabled: loading,\n          children: [\"Login \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"loading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 822,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 11\n        }, this), token && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 820,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCC4 Crear Documento Cl\\xEDnico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 834,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"CI del Paciente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 837,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: documentoIdPaciente,\n            onChange: e => setDocumentoIdPaciente(e.target.value),\n            placeholder: \"12345678\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 838,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 836,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"T\\xEDtulo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 846,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: titulo,\n            onChange: e => setTitulo(e.target.value),\n            placeholder: \"Consulta Medica - Gripe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 847,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Especialidad:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: especialidad,\n            onChange: e => setEspecialidad(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"MEDICINA_GENERAL\",\n              children: \"Medicina General\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"PEDIATRIA\",\n              children: \"Pediatr\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 858,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"CARDIOLOGIA\",\n              children: \"Cardiolog\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 859,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"DERMATOLOGIA\",\n              children: \"Dermatolog\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 835,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Contenido:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 865,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: contenido,\n          onChange: e => setContenido(e.target.value),\n          placeholder: \"Contenido del documento...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 864,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Archivo Adjunto (opcional):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          onChange: handleArchivoChange,\n          accept: \"*/*\",\n          style: {\n            width: '100%',\n            padding: '8px',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            fontSize: '14px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 874,\n          columnNumber: 11\n        }, this), archivoAdjunto && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '8px',\n            padding: '8px',\n            background: '#e3f2fd',\n            borderRadius: '4px',\n            fontSize: '13px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Archivo seleccionado:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 15\n          }, this), \" \", archivoAdjunto.name, \"(\", (archivoAdjunto.size / 1024).toFixed(2), \" KB)\", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setArchivoAdjunto(null);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n            },\n            style: {\n              marginLeft: '10px',\n              padding: '4px 8px',\n              background: '#f56565',\n              color: 'white',\n              border: 'none',\n              borderRadius: '3px',\n              cursor: 'pointer',\n              fontSize: '12px'\n            },\n            children: \"Eliminar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 897,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            color: '#666',\n            display: 'block',\n            marginTop: '5px'\n          },\n          children: \"\\uD83D\\uDCA1 El documento se convertir\\xE1 autom\\xE1ticamente a PDF. Si adjuntas un archivo, tambi\\xE9n se guardar\\xE1.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 872,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: handleCrearDocumento,\n          disabled: loading || !token,\n          children: [\"Crear Documento \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"loading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 925,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 924,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 923,\n        columnNumber: 9\n      }, this), (documentoId || mongoId) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"result success\",\n        style: {\n          marginTop: '10px'\n        },\n        children: [documentoId && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Documento ID (UUID):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 930,\n            columnNumber: 34\n          }, this), \" \", documentoId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 29\n        }, this), mongoId && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"MongoDB ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 931,\n            columnNumber: 30\n          }, this), \" \", mongoId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 929,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 833,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDD0D B\\xFAsqueda de Documentos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 938,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"CI del Paciente:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: ciBusqueda,\n            onChange: e => setCiBusqueda(e.target.value),\n            placeholder: \"12345678\",\n            style: {\n              flex: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 942,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleBuscarPorCI,\n            disabled: loading || !token,\n            children: [\"Buscar \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 950,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 949,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 9\n      }, this), documentosEncontrados.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Documentos Encontrados (\", documentosEncontrados.length, \"):\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 957,\n          columnNumber: 13\n        }, this), documentosEncontrados.map((doc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '10px',\n            margin: '10px 0',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            background: '#f9f9f9'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"ID:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 21\n              }, this), \" \", doc.codDocum || doc.id, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 67\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Paciente:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 969,\n                columnNumber: 21\n              }, this), \" \", doc.codIDPaciente, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 969,\n                columnNumber: 68\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"T\\xEDtulo:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 970,\n                columnNumber: 21\n              }, this), \" \", doc.titulo || doc.descripcion || 'N/A', doc.tipoDocumento && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 971,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tipo:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 971,\n                  columnNumber: 50\n                }, this), \" \", doc.tipoDocumento]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 967,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: () => handleObtenerDocumento(doc.codDocum || doc.id),\n                disabled: loading,\n                style: {\n                  fontSize: '12px',\n                  padding: '5px 10px'\n                },\n                children: \"Ver\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => handleDescargarDocumento(doc.codDocum || doc.id, modo === 'paciente'),\n                disabled: loading,\n                style: {\n                  fontSize: '12px',\n                  padding: '5px 10px'\n                },\n                title: modo === 'paciente' ? 'Descargar como paciente (sin verificación de políticas)' : 'Descargar como profesional (requiere políticas)',\n                children: modo === 'paciente' ? '📥 Descargar (Paciente)' : '📥 Descargar'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 982,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-info\",\n                onClick: () => handleVerificarPermiso(doc.codDocum || doc.id),\n                disabled: loading || modo === 'paciente',\n                style: {\n                  fontSize: '12px',\n                  padding: '5px 10px'\n                },\n                title: \"Verificar si tiene permiso para acceder\",\n                children: \"\\uD83D\\uDD0D Verificar Permiso\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 991,\n                columnNumber: 21\n              }, this), (doc.uriDocumento || doc.urlAcceso) && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                onClick: () => {\n                  const url = doc.uriDocumento || doc.urlAcceso;\n                  const mongoId = url.split('/').pop();\n                  handleDescargarContenido(mongoId, modo === 'paciente');\n                },\n                disabled: loading,\n                style: {\n                  fontSize: '12px',\n                  padding: '5px 10px'\n                },\n                title: modo === 'paciente' ? 'Obtener contenido como paciente' : 'Obtener contenido como profesional',\n                children: modo === 'paciente' ? '📄 Contenido (Paciente)' : '📄 Contenido'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1001,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 973,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 966,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 959,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 956,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 937,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCCB Solicitudes de Acceso\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1025,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '15px',\n          padding: '10px',\n          background: '#e3f2fd',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Flujo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1027,\n          columnNumber: 11\n        }, this), \" Profesional crea documento \\u2192 Otro profesional solicita acceso \\u2192 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"PACIENTE aprueba/rechaza\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1027,\n          columnNumber: 99\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1026,\n        columnNumber: 9\n      }, this), modo === 'profesional' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Como Profesional: Solicitar Acceso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1032,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"CI del Paciente:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1035,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: documentoIdPaciente,\n              onChange: e => setDocumentoIdPaciente(e.target.value),\n              placeholder: \"12345673\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1034,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: solicitudHistoriaCompleta,\n                onChange: e => setSolicitudHistoriaCompleta(e.target.checked),\n                style: {\n                  marginRight: '5px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1045,\n                columnNumber: 19\n              }, this), \"Solicitar acceso a historia cl\\xEDnica completa\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1044,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1043,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1033,\n          columnNumber: 13\n        }, this), !solicitudHistoriaCompleta && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Tipo de Documento (opcional):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1058,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: solicitudTipoDocumento,\n              onChange: e => setSolicitudTipoDocumento(e.target.value),\n              placeholder: \"OTROS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1059,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1057,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Documento ID (opcional):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1067,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: solicitudDocumentoId,\n              onChange: e => setSolicitudDocumentoId(e.target.value),\n              placeholder: documentoId || \"UUID del documento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1068,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1066,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1056,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleSolicitarAcceso,\n            disabled: loading || !token,\n            children: [\"Solicitar Acceso \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1079,\n              columnNumber: 46\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1078,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1077,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), modo === 'paciente' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDC64 Como Paciente: Gestionar Solicitudes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1087,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Mi CI:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1089,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: documentoIdPaciente,\n            onChange: e => setDocumentoIdPaciente(e.target.value),\n            placeholder: \"12345673\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1088,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => handleListarSolicitudes(true),\n            disabled: loading || !token,\n            children: [\"Listar Solicitudes Pendientes \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1099,\n              columnNumber: 59\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1098,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => handleListarSolicitudes(false),\n            disabled: loading || !token,\n            children: [\"Listar Todas las Solicitudes \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1102,\n              columnNumber: 58\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1101,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1097,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), solicitudes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Solicitudes Encontradas (\", solicitudes.length, \"):\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1110,\n          columnNumber: 13\n        }, this), solicitudes.map(solicitud => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '15px',\n            margin: '10px 0',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            background: solicitud.estado === 'PENDIENTE' ? '#fff3cd' : solicitud.estado === 'APROBADA' ? '#d4edda' : '#f8d7da'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'flex-start'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"ID:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 21\n              }, this), \" \", solicitud.id, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Estado:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 21\n              }, this), \" \", solicitud.estado, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 65\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Solicitante:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1123,\n                columnNumber: 21\n              }, this), \" \", solicitud.solicitanteId, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1123,\n                columnNumber: 77\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Paciente:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1124,\n                columnNumber: 21\n              }, this), \" \", solicitud.codDocumPaciente, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1124,\n                columnNumber: 77\n              }, this), solicitud.tipoDocumento && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tipo Documento:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1125,\n                  columnNumber: 51\n                }, this), \" \", solicitud.tipoDocumento, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1125,\n                  columnNumber: 110\n                }, this)]\n              }, void 0, true), solicitud.documentoId && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Documento ID:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1126,\n                  columnNumber: 49\n                }, this), \" \", solicitud.documentoId, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1126,\n                  columnNumber: 104\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Raz\\xF3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1127,\n                columnNumber: 21\n              }, this), \" \", solicitud.razonSolicitud || 'N/A', \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1127,\n                columnNumber: 81\n              }, this), solicitud.fechaSolicitud && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Fecha:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1128,\n                  columnNumber: 52\n                }, this), \" \", new Date(solicitud.fechaSolicitud).toLocaleString(), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1128,\n                  columnNumber: 130\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1120,\n              columnNumber: 19\n            }, this), solicitud.estado === 'PENDIENTE' && modo === 'paciente' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-group\",\n              style: {\n                flexDirection: 'column',\n                gap: '5px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => handleAprobarSolicitud(solicitud.id),\n                disabled: loading,\n                style: {\n                  fontSize: '12px',\n                  padding: '5px 10px'\n                },\n                children: \"\\u2705 Aprobar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1132,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                onClick: () => handleRechazarSolicitud(solicitud.id),\n                disabled: loading,\n                style: {\n                  fontSize: '12px',\n                  padding: '5px 10px'\n                },\n                children: \"\\u274C Rechazar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1140,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1131,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1119,\n            columnNumber: 17\n          }, this)\n        }, solicitud.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1112,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1109,\n        columnNumber: 11\n      }, this), solicitudId && solicitudes.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result success\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Solicitud ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1159,\n            columnNumber: 15\n          }, this), \" \", solicitudId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1158,\n          columnNumber: 13\n        }, this), modo === 'paciente' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-group\",\n          style: {\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success\",\n            onClick: () => handleAprobarSolicitud(solicitudId),\n            disabled: loading,\n            children: [\"\\u2705 Aprobar Solicitud \", solicitudId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1163,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: () => handleRechazarSolicitud(solicitudId),\n            disabled: loading,\n            children: [\"\\u274C Rechazar Solicitud \", solicitudId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1170,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1162,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1157,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1024,\n      columnNumber: 7\n    }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `result ${result.success ? 'success' : 'error'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [result.success ? '✅' : '❌', \" \", result.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1186,\n        columnNumber: 11\n      }, this), result.data && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: [result.data.tienePdf && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px',\n            background: '#d4edda',\n            borderRadius: '4px',\n            marginBottom: '8px',\n            fontSize: '14px'\n          },\n          children: [\"\\uD83D\\uDCC4 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"PDF generado:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1198,\n            columnNumber: 22\n          }, this), \" El documento se ha convertido autom\\xE1ticamente a PDF y se guard\\xF3 en MongoDB.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1191,\n          columnNumber: 17\n        }, this), result.data.tieneArchivoAdjunto && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px',\n            background: '#d1ecf1',\n            borderRadius: '4px',\n            marginBottom: '8px',\n            fontSize: '14px'\n          },\n          children: [\"\\uD83D\\uDCCE \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Archivo adjunto guardado:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1209,\n            columnNumber: 22\n          }, this), \" \", result.data.nombreArchivo || 'Archivo adjunto']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1202,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          style: {\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            style: {\n              cursor: 'pointer',\n              fontWeight: 'bold',\n              color: '#667eea'\n            },\n            children: \"Ver detalles completos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1213,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            style: {\n              marginTop: '10px'\n            },\n            children: JSON.stringify(result.data, null, 2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1216,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1212,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1188,\n        columnNumber: 13\n      }, this), result.error && /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: result.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1221,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1185,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 748,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Lbs5Db9GoWrth4KaYYGCmHXRSZI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","PERIFERICO_BASE","RNDC_BASE","POLITICAS_BASE","App","_s","token","setToken","localStorage","getItem","nickname","setNickname","password","setPassword","loading","setLoading","result","setResult","modo","setModo","documentoId","setDocumentoId","mongoId","setMongoId","documentoIdPaciente","setDocumentoIdPaciente","contenido","setContenido","titulo","setTitulo","especialidad","setEspecialidad","archivoAdjunto","setArchivoAdjunto","fileInputRef","ciBusqueda","setCiBusqueda","documentosEncontrados","setDocumentosEncontrados","documentoSeleccionado","setDocumentoSeleccionado","solicitudId","setSolicitudId","solicitudes","setSolicitudes","solicitudTipoDocumento","setSolicitudTipoDocumento","solicitudDocumentoId","setSolicitudDocumentoId","solicitudHistoriaCompleta","setSolicitudHistoriaCompleta","setItem","removeItem","handleLogin","response","fetch","method","headers","body","JSON","stringify","text","data","parse","e","success","message","status","statusText","error","ok","toString","handleLogout","handleCrearDocumento","formData","FormData","append","formato","autor","fechaCreacion","Date","toISOString","breakingTheGlass","mensaje","tienePdf","tieneArchivoAdjunto","current","value","handleArchivoChange","file","target","files","handleBuscarPorCI","Array","isArray","length","handleObtenerDocumento","docId","handleDescargarDocumento","esPaciente","contentType","get","contentDisposition","fileName","fileNameMatch","match","replace","blob","size","arrayBuffer","uint8Array","Uint8Array","isPdf","includes","Response","errorData","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","toFixed","handleDescargarContenido","handleListarSolicitudes","soloPendientes","endpoint","tipo","handleVerificarPermiso","documento","find","d","codDocum","id","tipoDoc","tipoDocumento","searchParams","tienePermiso","handleSolicitarAcceso","codDocumPaciente","razonSolicitud","solicitudIdNuevo","setTimeout","handleAprobarSolicitud","resueltoPor","comentario","handleRechazarSolicitud","errorText","json","className","children","_jsxFileName","lineNumber","columnNumber","style","marginTop","display","gap","alignItems","flexWrap","onChange","marginLeft","padding","substring","background","borderLeft","lineHeight","borderRadius","type","placeholder","onClick","disabled","ref","accept","width","border","fontSize","name","color","cursor","flex","map","doc","index","margin","justifyContent","codIDPaciente","descripcion","title","uriDocumento","urlAcceso","split","pop","marginBottom","checked","marginRight","solicitud","estado","solicitanteId","fechaSolicitud","toLocaleString","flexDirection","nombreArchivo","fontWeight","_c","$RefreshReg$"],"sources":["C:/Users/CaroH/Documents/fing/TSE/lab/test-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './index.css';\r\n\r\nconst API_BASE = 'http://127.0.0.1:8080';\r\nconst PERIFERICO_BASE = `${API_BASE}/hcen-web/api`;\r\nconst RNDC_BASE = `${API_BASE}/rndc/api`;\r\nconst POLITICAS_BASE = `${API_BASE}/hcen-politicas-service/api`;\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\r\n  const [nickname, setNickname] = useState('admin_c1');\r\n  const [password, setPassword] = useState('password123');\r\n  const [loading, setLoading] = useState(false);\r\n  const [result, setResult] = useState(null);\r\n  const [modo, setModo] = useState('profesional'); // 'profesional' o 'paciente'\r\n\r\n  // Documento\r\n  const [documentoId, setDocumentoId] = useState('');\r\n  const [mongoId, setMongoId] = useState('');\r\n  const [documentoIdPaciente, setDocumentoIdPaciente] = useState('12345673');\r\n  const [contenido, setContenido] = useState('Paciente presenta sintomas de gripe. Diagnostico: Gripe estacional. Tratamiento: reposo, hidratacion y medicamentos sintomaticos.');\r\n  const [titulo, setTitulo] = useState('Consulta Medica - Gripe');\r\n  const [especialidad, setEspecialidad] = useState('MEDICINA_GENERAL');\r\n  const [archivoAdjunto, setArchivoAdjunto] = useState(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Búsqueda\r\n  const [ciBusqueda, setCiBusqueda] = useState('12345673');\r\n  const [documentosEncontrados, setDocumentosEncontrados] = useState([]);\r\n  const [documentoSeleccionado, setDocumentoSeleccionado] = useState(null);\r\n\r\n  // Solicitudes\r\n  const [solicitudId, setSolicitudId] = useState('');\r\n  const [solicitudes, setSolicitudes] = useState([]);\r\n  const [solicitudTipoDocumento, setSolicitudTipoDocumento] = useState('');\r\n  const [solicitudDocumentoId, setSolicitudDocumentoId] = useState('');\r\n  const [solicitudHistoriaCompleta, setSolicitudHistoriaCompleta] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      localStorage.setItem('token', token);\r\n    } else {\r\n      localStorage.removeItem('token');\r\n    }\r\n  }, [token]);\r\n\r\n  const handleLogin = async () => {\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const response = await fetch(`${PERIFERICO_BASE}/auth/login`, {\r\n        method: 'POST',\r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({ nickname, password })\r\n      });\r\n\r\n      // Leer el texto primero para poder intentar parsearlo como JSON\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok && data.token) {\r\n        setToken(data.token);\r\n        setResult({ success: true, message: 'Login exitoso', data });\r\n      } else {\r\n        setResult({ \r\n          success: false, \r\n          message: data.error || `Error en login (${response.status})`, \r\n          data \r\n        });\r\n      }\r\n    } catch (error) {\r\n      setResult({ \r\n        success: false, \r\n        message: `Error de conexión: ${error.message}`, \r\n        error: error.toString() \r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    setToken('');\r\n    setResult(null);\r\n    setDocumentosEncontrados([]);\r\n    setDocumentoSeleccionado(null);\r\n  };\r\n\r\n  const handleCrearDocumento = async () => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      let response;\r\n      let data;\r\n\r\n      // Si hay archivo adjunto, usar el endpoint multipart\r\n      if (archivoAdjunto) {\r\n        const formData = new FormData();\r\n        formData.append('contenido', contenido);\r\n        formData.append('documentoIdPaciente', documentoIdPaciente);\r\n        formData.append('titulo', titulo);\r\n        formData.append('autor', nickname);\r\n        formData.append('especialidad', especialidad);\r\n        formData.append('archivo', archivoAdjunto);\r\n\r\n        response = await fetch(`${PERIFERICO_BASE}/documentos/completo-con-archivo`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n            // No establecer Content-Type, el navegador lo hará automáticamente con el boundary\r\n          },\r\n          body: formData\r\n        });\r\n      } else {\r\n        // Sin archivo, usar el endpoint JSON normal\r\n        const body = {\r\n          documentoIdPaciente,\r\n          contenido,\r\n          titulo,\r\n          especialidad,\r\n          formato: 'text/plain',\r\n          autor: nickname,\r\n          fechaCreacion: new Date().toISOString(),\r\n          breakingTheGlass: false\r\n        };\r\n\r\n        response = await fetch(`${PERIFERICO_BASE}/documentos/completo`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify(body)\r\n        });\r\n      }\r\n\r\n      // Leer el texto primero para poder intentar parsearlo como JSON\r\n      const text = await response.text();\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setDocumentoId(data.documentoId || '');\r\n        setMongoId(data.mongoId || '');\r\n        const mensaje = 'Documento creado exitosamente' + \r\n          (data.tienePdf ? ' (PDF generado)' : '') +\r\n          (data.tieneArchivoAdjunto ? ' (Archivo adjunto guardado)' : '');\r\n        setResult({ success: true, message: mensaje, data });\r\n        // Limpiar el archivo seleccionado después de crear el documento\r\n        setArchivoAdjunto(null);\r\n        if (fileInputRef.current) {\r\n          fileInputRef.current.value = '';\r\n        }\r\n      } else {\r\n        setResult({ success: false, message: data.error || 'Error al crear documento', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleArchivoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setArchivoAdjunto(file);\r\n    } else {\r\n      setArchivoAdjunto(null);\r\n    }\r\n  };\r\n\r\n  const handleBuscarPorCI = async () => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const response = await fetch(`${RNDC_BASE}/rndc/documentos/paciente/${ciBusqueda}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'X-Profesional-Id': nickname\r\n        }\r\n      });\r\n\r\n      // Leer el texto primero para poder intentar parsearlo como JSON\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setDocumentosEncontrados(Array.isArray(data) ? data : []);\r\n        setResult({ success: true, message: `Encontrados ${Array.isArray(data) ? data.length : 0} documentos`, data });\r\n      } else {\r\n        setResult({ success: false, message: data.error || 'Error al buscar documentos', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleObtenerDocumento = async (docId) => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const response = await fetch(`${RNDC_BASE}/rndc/documentos/${docId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'X-Profesional-Id': nickname\r\n        }\r\n      });\r\n\r\n      // Leer el texto primero para poder intentar parsearlo como JSON\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setDocumentoSeleccionado(data);\r\n        setResult({ success: true, message: 'Documento obtenido exitosamente', data });\r\n      } else {\r\n        setResult({ success: false, message: data.error || 'Error al obtener documento', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDescargarDocumento = async (docId, esPaciente = false) => {\r\n    if (!token && !esPaciente) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const headers = {};\r\n      if (esPaciente) {\r\n        headers['X-Paciente-CI'] = documentoIdPaciente;\r\n      } else {\r\n        headers['X-Profesional-Id'] = nickname;\r\n      }\r\n\r\n      const response = await fetch(`${RNDC_BASE}/rndc/documentos/${docId}/descargar`, {\r\n        method: 'GET',\r\n        headers: headers\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Verificar el Content-Type de la respuesta\r\n        const contentType = response.headers.get('Content-Type') || 'application/pdf';\r\n        const contentDisposition = response.headers.get('Content-Disposition');\r\n        \r\n        // Extraer el nombre del archivo del header Content-Disposition si está disponible\r\n        let fileName = `documento-${docId}.pdf`;\r\n        if (contentDisposition) {\r\n          const fileNameMatch = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);\r\n          if (fileNameMatch && fileNameMatch[1]) {\r\n            fileName = fileNameMatch[1].replace(/['\"]/g, '');\r\n          }\r\n        }\r\n        \r\n        const blob = await response.blob();\r\n        \r\n        // Verificar que el blob no esté vacío\r\n        if (blob.size === 0) {\r\n          setResult({ \r\n            success: false, \r\n            message: 'Error: El archivo descargado está vacío',\r\n            error: 'El servidor devolvió un archivo vacío'\r\n          });\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        // Verificar que el blob sea un PDF válido (debe empezar con %PDF)\r\n        const arrayBuffer = await blob.arrayBuffer();\r\n        const uint8Array = new Uint8Array(arrayBuffer);\r\n        const isPdf = uint8Array.length >= 4 && \r\n                      uint8Array[0] === 0x25 && // %\r\n                      uint8Array[1] === 0x50 && // P\r\n                      uint8Array[2] === 0x44 && // D\r\n                      uint8Array[3] === 0x46;   // F\r\n        \r\n        if (!isPdf && contentType.includes('application/pdf')) {\r\n          // Si el Content-Type dice PDF pero el contenido no lo es, puede ser un error JSON\r\n          const text = await new Response(blob).text();\r\n          try {\r\n            const errorData = JSON.parse(text);\r\n            setResult({ \r\n              success: false, \r\n              message: errorData.error || 'Error al descargar documento',\r\n              error: `Status: ${response.status}, Body: ${text}`\r\n            });\r\n          } catch (e) {\r\n            setResult({ \r\n              success: false, \r\n              message: 'Error: El archivo descargado no es un PDF válido',\r\n              error: `Content-Type: ${contentType}, Tamaño: ${blob.size} bytes`\r\n            });\r\n          }\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(a);\r\n        setResult({ success: true, message: `Documento descargado exitosamente ${esPaciente ? '(como paciente)' : '(como profesional)'} - Tamaño: ${(blob.size / 1024).toFixed(2)} KB` });\r\n      } else {\r\n        // Leer el texto primero para poder intentar parsearlo como JSON\r\n        const text = await response.text();\r\n        let data;\r\n        try {\r\n          data = JSON.parse(text);\r\n        } catch (e) {\r\n          // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n          setResult({ \r\n            success: false, \r\n            message: `Error ${response.status}: ${text || response.statusText}`,\r\n            error: `Status: ${response.status}, Body: ${text}`\r\n          });\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        setResult({ success: false, message: data.error || 'Error al descargar documento', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDescargarContenido = async (mongoId, esPaciente = false) => {\r\n    if (!token && !esPaciente) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const headers = {\r\n        'Authorization': `Bearer ${token}`\r\n      };\r\n      if (esPaciente) {\r\n        headers['X-Paciente-CI'] = documentoIdPaciente;\r\n      }\r\n\r\n      const response = await fetch(`${PERIFERICO_BASE}/documentos/${mongoId}/contenido`, {\r\n        method: 'GET',\r\n        headers: headers\r\n      });\r\n\r\n      // Leer el texto primero para poder intentar parsearlo como JSON\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        // Si no se puede parsear como JSON, puede ser texto plano\r\n        if (response.ok) {\r\n          setResult({ success: true, message: 'Contenido obtenido exitosamente', data: { contenido: text } });\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setResult({ success: true, message: `Contenido obtenido exitosamente ${esPaciente ? '(como paciente)' : '(como profesional)'}`, data });\r\n      } else {\r\n        setResult({ success: false, message: data.error || 'Error al obtener contenido', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleListarSolicitudes = async (soloPendientes = true) => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      // Listar solicitudes del paciente (pendientes o todas)\r\n      const endpoint = soloPendientes \r\n        ? `${POLITICAS_BASE}/solicitudes/paciente/${documentoIdPaciente}/pendientes`\r\n        : `${POLITICAS_BASE}/solicitudes/paciente/${documentoIdPaciente}`;\r\n      \r\n      const response = await fetch(endpoint, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setSolicitudes(Array.isArray(data) ? data : []);\r\n        const tipo = soloPendientes ? 'pendientes' : 'todas';\r\n        setResult({ success: true, message: `Encontradas ${Array.isArray(data) ? data.length : 0} solicitudes ${tipo}`, data });\r\n      } else {\r\n        setResult({ success: false, message: data.error || 'Error al listar solicitudes', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerificarPermiso = async (docId) => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const documento = documentosEncontrados.find(d => (d.codDocum || d.id) === docId);\r\n      const tipoDoc = documento?.tipoDocumento || '';\r\n      \r\n      // Construir URL con parámetros\r\n      const url = new URL(`${POLITICAS_BASE}/politicas/verificar`);\r\n      url.searchParams.append('profesionalId', nickname);\r\n      url.searchParams.append('pacienteCI', documentoIdPaciente);\r\n      if (tipoDoc) {\r\n        url.searchParams.append('tipoDoc', tipoDoc);\r\n      }\r\n      \r\n      const response = await fetch(url.toString(), {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/json'\r\n          // No incluir Content-Type para GET requests\r\n        }\r\n      });\r\n\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setResult({ \r\n          success: true, \r\n          message: data.tienePermiso ? '✅ Tiene permiso para acceder' : '❌ No tiene permiso para acceder',\r\n          data \r\n        });\r\n      } else {\r\n        setResult({ success: false, message: data.error || `Error al verificar permiso (${response.status})`, data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ \r\n        success: false, \r\n        message: `Error de conexión: ${error.message}`, \r\n        error: error.toString() \r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSolicitarAcceso = async () => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      let body;\r\n      let endpoint;\r\n      \r\n      if (solicitudHistoriaCompleta) {\r\n        // Solicitar acceso a toda la historia clínica\r\n        endpoint = `${PERIFERICO_BASE}/documentos/solicitar-acceso-historia-clinica`;\r\n        body = {\r\n          codDocumPaciente: documentoIdPaciente,\r\n          razonSolicitud: 'Solicitud de acceso a toda la historia clínica del paciente',\r\n          especialidad: especialidad\r\n        };\r\n      } else {\r\n        // Solicitar acceso a documento específico\r\n        endpoint = `${PERIFERICO_BASE}/documentos/solicitar-acceso`;\r\n        body = {\r\n          codDocumPaciente: documentoIdPaciente,\r\n          tipoDocumento: solicitudTipoDocumento || (documentoId ? 'OTROS' : null),\r\n          documentoId: solicitudDocumentoId || documentoId || null,\r\n          razonSolicitud: 'Prueba de acceso desde frontend'\r\n        };\r\n      }\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      // Leer el texto primero para poder intentar parsearlo como JSON\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        // Si no se puede parsear como JSON, usar el texto como mensaje de error\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        const solicitudIdNuevo = data.id || data.solicitudId || '';\r\n        setSolicitudId(solicitudIdNuevo);\r\n        setResult({ success: true, message: 'Solicitud creada exitosamente', data });\r\n        // Actualizar lista de solicitudes si estamos en modo paciente\r\n        if (modo === 'paciente') {\r\n          setTimeout(() => handleListarSolicitudes(true), 500);\r\n        }\r\n      } else {\r\n        setResult({ success: false, message: data.error || 'Error al crear solicitud', data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAprobarSolicitud = async (solicitudId) => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const response = await fetch(`${PERIFERICO_BASE}/documentos/solicitudes/${solicitudId}/aprobar`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          resueltoPor: modo === 'paciente' ? `paciente_${documentoIdPaciente}` : nickname,\r\n          comentario: 'Aprobado desde frontend de pruebas'\r\n        })\r\n      });\r\n\r\n      const text = await response.text();\r\n      let data;\r\n      try {\r\n        data = JSON.parse(text);\r\n      } catch (e) {\r\n        setResult({ \r\n          success: false, \r\n          message: `Error ${response.status}: ${text || response.statusText}`,\r\n          error: `Status: ${response.status}, Body: ${text}`\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setResult({ success: true, message: '✅ Solicitud aprobada exitosamente. Se creó automáticamente una política de acceso.', data });\r\n        // Actualizar lista de solicitudes si estamos en modo paciente\r\n        if (modo === 'paciente') {\r\n          setTimeout(() => handleListarSolicitudes(true), 500);\r\n        }\r\n      } else {\r\n        setResult({ success: false, message: data.error || `Error al aprobar solicitud (${response.status})`, data });\r\n      }\r\n    } catch (error) {\r\n      setResult({ \r\n        success: false, \r\n        message: `Error de conexión: ${error.message}`, \r\n        error: error.toString() \r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRechazarSolicitud = async (solicitudId) => {\r\n    if (!token) {\r\n      setResult({ success: false, message: 'Debes iniciar sesión primero' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setResult(null);\r\n    try {\r\n      const response = await fetch(`${PERIFERICO_BASE}/documentos/solicitudes/${solicitudId}/rechazar`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          resueltoPor: modo === 'paciente' ? `paciente_${documentoIdPaciente}` : nickname,\r\n          comentario: 'Rechazado desde frontend de pruebas'\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        let errorData;\r\n        try {\r\n          errorData = JSON.parse(errorText);\r\n        } catch {\r\n          errorData = { error: errorText || `Error ${response.status}` };\r\n        }\r\n        setResult({ success: false, message: errorData.error || 'Error al rechazar solicitud', data: errorData });\r\n        return;\r\n      }\r\n\r\n      const data = await response.json();\r\n      setResult({ success: true, message: '❌ Solicitud rechazada exitosamente', data });\r\n      // Actualizar lista de solicitudes si estamos en modo paciente\r\n      if (modo === 'paciente') {\r\n        setTimeout(() => handleListarSolicitudes(true), 500);\r\n      }\r\n    } catch (error) {\r\n      setResult({ success: false, message: error.message, error: error.toString() });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"header\">\r\n        <h1>🔬 HCEN Test Frontend</h1>\r\n        <p>Interfaz de pruebas para endpoints HCEN - Flujo Completo de Acceso a Documentos</p>\r\n        <div style={{ marginTop: '10px', display: 'flex', gap: '15px', alignItems: 'center', flexWrap: 'wrap' }}>\r\n          <div>\r\n            Estado: \r\n            <span className={`status-badge ${token ? 'authenticated' : 'unauthenticated'}`}>\r\n              {token ? 'Autenticado' : 'No autenticado'}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            Modo: \r\n            <select \r\n              value={modo} \r\n              onChange={(e) => setModo(e.target.value)}\r\n              style={{ marginLeft: '5px', padding: '5px' }}\r\n            >\r\n              <option value=\"profesional\">👨‍⚕️ Profesional</option>\r\n              <option value=\"paciente\">👤 Paciente</option>\r\n            </select>\r\n          </div>\r\n          {token && (\r\n            <div className=\"token-display\">\r\n              Usuario: {nickname} | Token: {token.substring(0, 20)}...\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Información del Flujo */}\r\n      <div className=\"section\" style={{ background: '#e3f2fd', borderLeft: '4px solid #2196F3' }}>\r\n        <h2>📖 Guía de Uso - Flujo Completo</h2>\r\n        <div style={{ lineHeight: '1.8' }}>\r\n          <h3>Flujo Principal:</h3>\r\n          <ol style={{ marginLeft: '20px', marginTop: '10px' }}>\r\n            <li><strong>Como Profesional:</strong> Crear un documento clínico para un paciente</li>\r\n            <li><strong>Como Otro Profesional:</strong> Intentar acceder al documento (será denegado sin permisos)</li>\r\n            <li><strong>Como Otro Profesional:</strong> Solicitar acceso al documento o historia clínica completa</li>\r\n            <li><strong>Como Paciente:</strong> Listar solicitudes pendientes y aprobar/rechazar</li>\r\n            <li><strong>Como Profesional:</strong> Verificar permisos y acceder al documento (ahora permitido)</li>\r\n            <li><strong>Como Paciente:</strong> Acceder a sus propios documentos sin solicitar autorización</li>\r\n          </ol>\r\n          <div style={{ marginTop: '15px', padding: '10px', background: '#fff', borderRadius: '4px' }}>\r\n            <strong>💡 Tip:</strong> Cambia entre modo \"Profesional\" y \"Paciente\" en el selector del header para probar diferentes escenarios.\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Login Section */}\r\n      <div className=\"login-section\">\r\n        <h2>🔐 Autenticación</h2>\r\n        <div className=\"grid\">\r\n          <div className=\"form-group\">\r\n            <label>Nickname:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={nickname}\r\n              onChange={(e) => setNickname(e.target.value)}\r\n              placeholder=\"admin_c1\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Password:</label>\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder=\"password123\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"button-group\">\r\n          <button className=\"btn btn-primary\" onClick={handleLogin} disabled={loading}>\r\n            Login {loading && <span className=\"loading\"></span>}\r\n          </button>\r\n          {token && (\r\n            <button className=\"btn btn-secondary\" onClick={handleLogout}>\r\n              Logout\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Crear Documento */}\r\n      <div className=\"section\">\r\n        <h2>📄 Crear Documento Clínico</h2>\r\n        <div className=\"grid\">\r\n          <div className=\"form-group\">\r\n            <label>CI del Paciente:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={documentoIdPaciente}\r\n              onChange={(e) => setDocumentoIdPaciente(e.target.value)}\r\n              placeholder=\"12345678\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Título:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={titulo}\r\n              onChange={(e) => setTitulo(e.target.value)}\r\n              placeholder=\"Consulta Medica - Gripe\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Especialidad:</label>\r\n            <select value={especialidad} onChange={(e) => setEspecialidad(e.target.value)}>\r\n              <option value=\"MEDICINA_GENERAL\">Medicina General</option>\r\n              <option value=\"PEDIATRIA\">Pediatría</option>\r\n              <option value=\"CARDIOLOGIA\">Cardiología</option>\r\n              <option value=\"DERMATOLOGIA\">Dermatología</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Contenido:</label>\r\n          <textarea\r\n            value={contenido}\r\n            onChange={(e) => setContenido(e.target.value)}\r\n            placeholder=\"Contenido del documento...\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Archivo Adjunto (opcional):</label>\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            onChange={handleArchivoChange}\r\n            accept=\"*/*\"\r\n            style={{ \r\n              width: '100%', \r\n              padding: '8px', \r\n              border: '1px solid #ddd', \r\n              borderRadius: '4px',\r\n              fontSize: '14px'\r\n            }}\r\n          />\r\n          {archivoAdjunto && (\r\n            <div style={{ \r\n              marginTop: '8px', \r\n              padding: '8px', \r\n              background: '#e3f2fd', \r\n              borderRadius: '4px',\r\n              fontSize: '13px'\r\n            }}>\r\n              <strong>Archivo seleccionado:</strong> {archivoAdjunto.name} \r\n              ({(archivoAdjunto.size / 1024).toFixed(2)} KB)\r\n              <button \r\n                onClick={() => {\r\n                  setArchivoAdjunto(null);\r\n                  if (fileInputRef.current) {\r\n                    fileInputRef.current.value = '';\r\n                  }\r\n                }}\r\n                style={{\r\n                  marginLeft: '10px',\r\n                  padding: '4px 8px',\r\n                  background: '#f56565',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '3px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '12px'\r\n                }}\r\n              >\r\n                Eliminar\r\n              </button>\r\n            </div>\r\n          )}\r\n          <small style={{ color: '#666', display: 'block', marginTop: '5px' }}>\r\n            💡 El documento se convertirá automáticamente a PDF. Si adjuntas un archivo, también se guardará.\r\n          </small>\r\n        </div>\r\n        <div className=\"button-group\">\r\n          <button className=\"btn btn-success\" onClick={handleCrearDocumento} disabled={loading || !token}>\r\n            Crear Documento {loading && <span className=\"loading\"></span>}\r\n          </button>\r\n        </div>\r\n        {(documentoId || mongoId) && (\r\n          <div className=\"result success\" style={{ marginTop: '10px' }}>\r\n            {documentoId && <div><strong>Documento ID (UUID):</strong> {documentoId}</div>}\r\n            {mongoId && <div><strong>MongoDB ID:</strong> {mongoId}</div>}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Búsqueda */}\r\n      <div className=\"section\">\r\n        <h2>🔍 Búsqueda de Documentos</h2>\r\n        <div className=\"form-group\">\r\n          <label>CI del Paciente:</label>\r\n          <div style={{ display: 'flex', gap: '10px' }}>\r\n            <input\r\n              type=\"text\"\r\n              value={ciBusqueda}\r\n              onChange={(e) => setCiBusqueda(e.target.value)}\r\n              placeholder=\"12345678\"\r\n              style={{ flex: 1 }}\r\n            />\r\n            <button className=\"btn btn-primary\" onClick={handleBuscarPorCI} disabled={loading || !token}>\r\n              Buscar {loading && <span className=\"loading\"></span>}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {documentosEncontrados.length > 0 && (\r\n          <div style={{ marginTop: '15px' }}>\r\n            <h3>Documentos Encontrados ({documentosEncontrados.length}):</h3>\r\n            {documentosEncontrados.map((doc, index) => (\r\n              <div key={index} style={{ \r\n                padding: '10px', \r\n                margin: '10px 0', \r\n                border: '1px solid #ddd', \r\n                borderRadius: '4px',\r\n                background: '#f9f9f9'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <div>\r\n                    <strong>ID:</strong> {doc.codDocum || doc.id} <br/>\r\n                    <strong>Paciente:</strong> {doc.codIDPaciente} <br/>\r\n                    <strong>Título:</strong> {doc.titulo || doc.descripcion || 'N/A'}\r\n                    {doc.tipoDocumento && <><br/><strong>Tipo:</strong> {doc.tipoDocumento}</>}\r\n                  </div>\r\n                  <div className=\"button-group\">\r\n                    <button \r\n                      className=\"btn btn-primary\" \r\n                      onClick={() => handleObtenerDocumento(doc.codDocum || doc.id)}\r\n                      disabled={loading}\r\n                      style={{ fontSize: '12px', padding: '5px 10px' }}\r\n                    >\r\n                      Ver\r\n                    </button>\r\n                    <button \r\n                      className=\"btn btn-success\" \r\n                      onClick={() => handleDescargarDocumento(doc.codDocum || doc.id, modo === 'paciente')}\r\n                      disabled={loading}\r\n                      style={{ fontSize: '12px', padding: '5px 10px' }}\r\n                      title={modo === 'paciente' ? 'Descargar como paciente (sin verificación de políticas)' : 'Descargar como profesional (requiere políticas)'}\r\n                    >\r\n                      {modo === 'paciente' ? '📥 Descargar (Paciente)' : '📥 Descargar'}\r\n                    </button>\r\n                    <button \r\n                      className=\"btn btn-info\" \r\n                      onClick={() => handleVerificarPermiso(doc.codDocum || doc.id)}\r\n                      disabled={loading || modo === 'paciente'}\r\n                      style={{ fontSize: '12px', padding: '5px 10px' }}\r\n                      title=\"Verificar si tiene permiso para acceder\"\r\n                    >\r\n                      🔍 Verificar Permiso\r\n                    </button>\r\n                    {(doc.uriDocumento || doc.urlAcceso) && (\r\n                      <button \r\n                        className=\"btn btn-secondary\" \r\n                        onClick={() => {\r\n                          const url = doc.uriDocumento || doc.urlAcceso;\r\n                          const mongoId = url.split('/').pop();\r\n                          handleDescargarContenido(mongoId, modo === 'paciente');\r\n                        }}\r\n                        disabled={loading}\r\n                        style={{ fontSize: '12px', padding: '5px 10px' }}\r\n                        title={modo === 'paciente' ? 'Obtener contenido como paciente' : 'Obtener contenido como profesional'}\r\n                      >\r\n                        {modo === 'paciente' ? '📄 Contenido (Paciente)' : '📄 Contenido'}\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Solicitudes de Acceso */}\r\n      <div className=\"section\">\r\n        <h2>📋 Solicitudes de Acceso</h2>\r\n        <div style={{ marginBottom: '15px', padding: '10px', background: '#e3f2fd', borderRadius: '4px' }}>\r\n          <strong>Flujo:</strong> Profesional crea documento → Otro profesional solicita acceso → <strong>PACIENTE aprueba/rechaza</strong>\r\n        </div>\r\n        \r\n        {modo === 'profesional' && (\r\n          <>\r\n            <h3>👨‍⚕️ Como Profesional: Solicitar Acceso</h3>\r\n            <div className=\"grid\">\r\n              <div className=\"form-group\">\r\n                <label>CI del Paciente:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={documentoIdPaciente}\r\n                  onChange={(e) => setDocumentoIdPaciente(e.target.value)}\r\n                  placeholder=\"12345673\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={solicitudHistoriaCompleta}\r\n                    onChange={(e) => setSolicitudHistoriaCompleta(e.target.checked)}\r\n                    style={{ marginRight: '5px' }}\r\n                  />\r\n                  Solicitar acceso a historia clínica completa\r\n                </label>\r\n              </div>\r\n            </div>\r\n            {!solicitudHistoriaCompleta && (\r\n              <div className=\"grid\">\r\n                <div className=\"form-group\">\r\n                  <label>Tipo de Documento (opcional):</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={solicitudTipoDocumento}\r\n                    onChange={(e) => setSolicitudTipoDocumento(e.target.value)}\r\n                    placeholder=\"OTROS\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Documento ID (opcional):</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={solicitudDocumentoId}\r\n                    onChange={(e) => setSolicitudDocumentoId(e.target.value)}\r\n                    placeholder={documentoId || \"UUID del documento\"}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"button-group\">\r\n              <button className=\"btn btn-primary\" onClick={handleSolicitarAcceso} disabled={loading || !token}>\r\n                Solicitar Acceso {loading && <span className=\"loading\"></span>}\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {modo === 'paciente' && (\r\n          <>\r\n            <h3>👤 Como Paciente: Gestionar Solicitudes</h3>\r\n            <div className=\"form-group\">\r\n              <label>Mi CI:</label>\r\n              <input\r\n                type=\"text\"\r\n                value={documentoIdPaciente}\r\n                onChange={(e) => setDocumentoIdPaciente(e.target.value)}\r\n                placeholder=\"12345673\"\r\n              />\r\n            </div>\r\n            <div className=\"button-group\">\r\n              <button className=\"btn btn-primary\" onClick={() => handleListarSolicitudes(true)} disabled={loading || !token}>\r\n                Listar Solicitudes Pendientes {loading && <span className=\"loading\"></span>}\r\n              </button>\r\n              <button className=\"btn btn-secondary\" onClick={() => handleListarSolicitudes(false)} disabled={loading || !token}>\r\n                Listar Todas las Solicitudes {loading && <span className=\"loading\"></span>}\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {solicitudes.length > 0 && (\r\n          <div style={{ marginTop: '15px' }}>\r\n            <h3>Solicitudes Encontradas ({solicitudes.length}):</h3>\r\n            {solicitudes.map((solicitud) => (\r\n              <div key={solicitud.id} style={{ \r\n                padding: '15px', \r\n                margin: '10px 0', \r\n                border: '1px solid #ddd', \r\n                borderRadius: '4px',\r\n                background: solicitud.estado === 'PENDIENTE' ? '#fff3cd' : solicitud.estado === 'APROBADA' ? '#d4edda' : '#f8d7da'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                  <div style={{ flex: 1 }}>\r\n                    <strong>ID:</strong> {solicitud.id} <br/>\r\n                    <strong>Estado:</strong> {solicitud.estado} <br/>\r\n                    <strong>Solicitante:</strong> {solicitud.solicitanteId} <br/>\r\n                    <strong>Paciente:</strong> {solicitud.codDocumPaciente} <br/>\r\n                    {solicitud.tipoDocumento && <><strong>Tipo Documento:</strong> {solicitud.tipoDocumento} <br/></>}\r\n                    {solicitud.documentoId && <><strong>Documento ID:</strong> {solicitud.documentoId} <br/></>}\r\n                    <strong>Razón:</strong> {solicitud.razonSolicitud || 'N/A'} <br/>\r\n                    {solicitud.fechaSolicitud && <><strong>Fecha:</strong> {new Date(solicitud.fechaSolicitud).toLocaleString()} <br/></>}\r\n                  </div>\r\n                  {solicitud.estado === 'PENDIENTE' && modo === 'paciente' && (\r\n                    <div className=\"button-group\" style={{ flexDirection: 'column', gap: '5px' }}>\r\n                      <button \r\n                        className=\"btn btn-success\" \r\n                        onClick={() => handleAprobarSolicitud(solicitud.id)}\r\n                        disabled={loading}\r\n                        style={{ fontSize: '12px', padding: '5px 10px' }}\r\n                      >\r\n                        ✅ Aprobar\r\n                      </button>\r\n                      <button \r\n                        className=\"btn btn-danger\" \r\n                        onClick={() => handleRechazarSolicitud(solicitud.id)}\r\n                        disabled={loading}\r\n                        style={{ fontSize: '12px', padding: '5px 10px' }}\r\n                      >\r\n                        ❌ Rechazar\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {solicitudId && solicitudes.length === 0 && (\r\n          <div style={{ marginTop: '15px' }}>\r\n            <div className=\"result success\">\r\n              <strong>Solicitud ID:</strong> {solicitudId}\r\n            </div>\r\n            {modo === 'paciente' && (\r\n              <div className=\"button-group\" style={{ marginTop: '10px' }}>\r\n                <button \r\n                  className=\"btn btn-success\" \r\n                  onClick={() => handleAprobarSolicitud(solicitudId)}\r\n                  disabled={loading}\r\n                >\r\n                  ✅ Aprobar Solicitud {solicitudId}\r\n                </button>\r\n                <button \r\n                  className=\"btn btn-danger\" \r\n                  onClick={() => handleRechazarSolicitud(solicitudId)}\r\n                  disabled={loading}\r\n                >\r\n                  ❌ Rechazar Solicitud {solicitudId}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Resultado */}\r\n      {result && (\r\n        <div className={`result ${result.success ? 'success' : 'error'}`}>\r\n          <strong>{result.success ? '✅' : '❌'} {result.message}</strong>\r\n          {result.data && (\r\n            <div style={{ marginTop: '10px' }}>\r\n              {/* Mostrar información sobre PDF y archivos adjuntos */}\r\n              {result.data.tienePdf && (\r\n                <div style={{ \r\n                  padding: '8px', \r\n                  background: '#d4edda', \r\n                  borderRadius: '4px', \r\n                  marginBottom: '8px',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  📄 <strong>PDF generado:</strong> El documento se ha convertido automáticamente a PDF y se guardó en MongoDB.\r\n                </div>\r\n              )}\r\n              {result.data.tieneArchivoAdjunto && (\r\n                <div style={{ \r\n                  padding: '8px', \r\n                  background: '#d1ecf1', \r\n                  borderRadius: '4px', \r\n                  marginBottom: '8px',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  📎 <strong>Archivo adjunto guardado:</strong> {result.data.nombreArchivo || 'Archivo adjunto'}\r\n                </div>\r\n              )}\r\n              <details style={{ marginTop: '10px' }}>\r\n                <summary style={{ cursor: 'pointer', fontWeight: 'bold', color: '#667eea' }}>\r\n                  Ver detalles completos\r\n                </summary>\r\n                <pre style={{ marginTop: '10px' }}>{JSON.stringify(result.data, null, 2)}</pre>\r\n              </details>\r\n            </div>\r\n          )}\r\n          {result.error && (\r\n            <pre style={{ marginTop: '10px' }}>{result.error}</pre>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}